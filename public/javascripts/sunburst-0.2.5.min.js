(function(t){"use strict";t(document).ready(function(){d3.json("/articles/export/categories.json",sunburst)})})(jQuery);function sunburst(t){"use strict";var n=Math.PI;var a=d3.select("#chart");var e=Math.max(parseInt(a.style("width"))||480,480);var r=.833333*e||400;var i=Math.min(e,r)/2;var o=d3.scale.linear().range([0,2*n]);var u=d3.scale.sqrt().range([0,i]);var s=d3.scale.category20c();var d=a.append("svg").attr("width",e).attr("height",r).append("g").attr("transform","translate("+e/2+","+r/2+")");var c=d3.layout.partition().value(function(t){return t.size});var l=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*n,o(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*n,o(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,u(t.y))}).outerRadius(function(t){return Math.max(0,u(t.y+t.dy))});var p=a.append("div").attr("id","tooltip").style("opacity",0);var v=d.selectAll("path").data(c.nodes(t)).enter().append("path").attr("d",l).style("fill",function(t){return s((t.children?t:t.parent).category)}).on("click",function(t){v.transition().duration(750).attrTween("d",y(t))}).on("mouseover",function(t){p.transition().duration(200).style("opacity",.8);p.html(t.category+": "+t.size).style("left",d3.event.pageX+20+"px").style("top",d3.event.pageY-20+"px")}).on("mousemove",function(t){p.style("left",d3.event.pageX+20+"px").style("top",d3.event.pageY-20+"px")}).on("mouseout",function(t){p.transition().duration(500).style("opacity",0)});function y(t){var n=d3.interpolate(o.domain(),[t.x,t.x+t.dx]);var a=d3.interpolate(u.domain(),[t.y,1]);var e=d3.interpolate(u.range(),[t.y?20:0,i]);return function(t,r){return r?function(n){return l(t)}:function(r){o.domain(n(r));u.domain(a(r)).range(e(r));return l(t)}}}}