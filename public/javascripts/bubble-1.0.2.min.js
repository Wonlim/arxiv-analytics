function bubble(t,a){"use strict";var r=d3.select("#"+(a.id||"chart"));var e=(parseInt(r.style("width"))||300)/100;var n={top:3*e,right:3*e,bottom:10*e,left:12*e};var i=Math.max(100*e,300)-n.right-n.left;var o=Math.max(.666667*i||200,200)-n.top-n.bottom;var s=t.map(function(t){return t[0]});var d=t.map(function(t){return t[1]});var l=t.map(function(t){return t[2]});var c=d3.min(s);var p=d3.max(s);var v=d3.min(d);var m=d3.max(d);var u=d3.min(l);var f=d3.max(l);var x=d3.scale.linear().domain([c-.5,p+.5]).range([0,i]);var y=d3.scale.linear().domain([v*.9,m*1.1]).range([o,0]);var g=r.append("svg").attr("width",i+n.left+n.right).attr("height",o+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")");var h=Math.max(Math.min(Math.round(i/100),12),6);var k=d3.svg.axis().orient("bottom").scale(x).ticks(h);var b=d3.svg.axis().orient("left").scale(y).ticks(6);g.append("g").attr("class","axis").attr("transform","translate(0,"+o+")").call(k.outerTickSize(0).tickPadding(4).tickFormat(d3.format("d")));g.append("g").attr("class","axis").call(b.outerTickSize(0).tickPadding(4).tickFormat(d3.format("d")));var M=a.labels;g.append("text").attr("text-anchor","end").attr("x",i).attr("y",o).attr("dy","3em").text(M.x.text);g.append("text").attr("text-anchor","end").attr("y",0).attr("dy","-3em").attr("transform","rotate(-90)").text(M.y.text);var z=a.grids;if(z.x.display){g.append("g").attr("class","grid").attr("stroke-dasharray","6, 4").attr("transform","translate(0,"+o+")").call(k.tickSize(-o,0,0).tickFormat(""))}if(z.y.display){g.append("g").attr("class","grid").attr("stroke-dasharray","6, 4").call(b.tickSize(-i,0,0).tickFormat(""))}var F=a.dots;var S=g.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("cx",function(t){return x(t[0])}).attr("cy",function(t){return y(t[1])}).attr("r",function(t){var a=o/18;return a*(t[2]-u)/(f-u||1)+4}).style("fill",function(t){var a=160*(1-t[1]/m)+20;var r=.8*(t[1]-v)/(m-v||1)+.2;var e=.6-.4*(t[0]-c)/(p-c||1);return d3.hsl(a,r,e)}).sort(function(t,a){return a[2]-t[2]}).on("click",function(t){if(typeof F.onlick==="function"){F.onlick(t)}}).on("mouseover",function(t){w.transition().duration(200).style("opacity",.8);w.html(a.tooltip.html(t)).style("left",d3.event.pageX+20+"px").style("top",d3.event.pageY-45+"px")}).on("mousemove",function(t){var a=parseInt(w.style("width"))*.5;w.style("left",d3.event.pageX-a+"px").style("top",d3.event.pageY-45+"px")}).on("mouseout",function(t){w.transition().duration(500).style("opacity",0)});var w=r.append("div").attr("id",a.tooltip.id||"tooltip").style("opacity",0)}