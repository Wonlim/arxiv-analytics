function sunburst(t,a){"use strict";var n=Math.PI;var e=d3.select("#"+(a.id||"chart"));var r=Math.max(parseInt(e.style("width"))||300,300);var i=.833333*r||250;var o=Math.min(r,i)/2;var d=d3.scale.linear().range([0,2*n]);var u=d3.scale.sqrt().range([0,o]);var l=d3.scale.category20c();var s=e.append("svg").attr("width",r).attr("height",i).append("g").attr("transform","translate("+r/2+","+i/2+")");var p=d3.layout.partition().value(a.partition);var c=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*n,d(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*n,d(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,u(t.y))}).outerRadius(function(t){return Math.max(0,u(t.y+t.dy))});var v=e.append("div").attr("id",a.tooltip.id||"tooltip").style("opacity",0);var m=s.selectAll("path").data(p.nodes(t)).enter().append("path").attr("d",c).style("fill",function(t){return l(a.normalize(t))}).on("click",function(t){m.transition().duration(750).attrTween("d",y(t))}).on("mouseover",function(t){v.transition().duration(200).style("opacity",.8);v.html(a.tooltip.html(t)).style("left",d3.event.pageX+20+"px").style("top",d3.event.pageY-45+"px")}).on("mousemove",function(t){var a=parseInt(v.style("width"))*.5;v.style("left",d3.event.pageX-a+"px").style("top",d3.event.pageY-45+"px")}).on("mouseout",function(t){v.transition().duration(500).style("opacity",0)});function y(t){var a=d3.interpolate(d.domain(),[t.x,t.x+t.dx]);var n=d3.interpolate(u.domain(),[t.y,1]);var e=d3.interpolate(u.range(),[t.y?20:0,o]);return function(t,r){return r?function(a){return c(t)}:function(r){d.domain(a(r));u.domain(n(r)).range(e(r));return c(t)}}}}